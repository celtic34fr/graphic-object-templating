{# template pour l'objet OCTabs #}

{% macro setBtnPrevious(id, index) %}
    {%  set next = -1 %}
    {% for i in range(objet.tabs|length, index - 1, -1)  if next < 0 %}
        {% if objet.tabs[i]['show'] == true %} {% set next = i %}
    {% endfor %}
    <button onclick="toggle('{{ id }}', {{ index }}, {{ index - 1 }});">{{ translate("previous") }}</button>
{% endmacro %}

{% macro setBtnNext(id, index) %}
    {%  set next = -1 %}
    {% for i in (index + 1)..(objet.tabs|length) if next < 0 %}
        {% if objet.tabs[i]['show'] == true %} {% set next = i %}
    {% endfor %}
    <button onclick="toggle('{{ id }}', {{ index }}, {{ index - 1 }});">{{ translate("next") }}</button>
{% endmacro %}

<div id="{{ objet.id }}" class="container">
    <h2>{{ objet.title }}</h2>
    <ul class="nav nav-tabs">
        {% set firstVue = -1 %}
        {% for idx, tab in  objet.tabs %}
            {% if tab.show == true %}
                {% if firstVue == -1 %} {% set firstVue = loop.index %} {% endif %}
                {% set lastVue = loop.index %}
        <li class="{{ objet.id~"_TTAB_"~loop.index }}">
            <a data-toggle="tab" href="#{{ objet.id~'_CTAB_'~loop.index }}">{{ tab.title }}</a>
        </li>
            {% endif %}
        {% endfor %}
    </ul>
    <div class="tab-content">
        {% for idx, tab in objet.tabs %}
            {% if tab.show == true %}
        <div id="{{ objet.id~'_CTAB_'~loop.index }}" class="tab-pane fade">
            <h3>{{ tab.title }}</h3>
            {{ gotRender(tab.content) }}
            {% if objet.naviagetion == true %}
                {% if loop.index != lastVue %} {{ setBtnNext(objet.id, loop.index) }} {% endif %}
                {% if loop.index != firstVue %} {{ setbtnPrevious(objet.id, loop.index) }} {% endif %}
            {% endif %}
        </div>
            {% endif %}
        {% endfor %}
    </div>
</div>