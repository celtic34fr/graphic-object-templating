{# template de l'objet OCInput #}

{% set objClass = gotBootstrap(objet.widthBT) %}
{% set labelClass = "" %}
{% set inputClass = "" %}

{% if objet.type != "hidden" and objet.errMessage is defined and objet.errMessage is not empty %}
    {% set objClass   = objClass ~ " has-error " %}
    {% set labelClass = "control-label " %}
    {% set inputClass = " form-control " %}
{% endif %}
{% set labelWidth = "" %}
{% set inputWidth = "" %}
{% for key, value in objet.labelWidthBT %}
    {% if (substr(key, 0, 1) == 'l') %}
        {% set cle = 'w' ~ substr(key, 1, 1) %}
        {% set labelWidth = labelWidth ~ cle ~ value ~ ":" %}
    {% elseif (substr(key, 0, 1) == 'i') %}
        {% set cle = 'w' ~ substr(key, 1, 1) %}
        {% set inputWidth = inputWidth ~ cle ~ value ~ ":" %}
    {% endif %}
{% endfor %}
{% set labelClass = labelClass ~ gotBootstrap(substr(labelWidth, 0, labelWidth|length - 1)) %}
{% set inputClass = inputClass ~ gotBootstrap(inputWidth) %}
{% if objet.classes is not empty %}
    {% set inputClass = inputClass ~ " " ~ objet.classes %}
{% endif %}

<style>
    #{{ objet.id }} {
        display: {{ objet.display }};
    {% if objet.style is not empty %}
        {{ objet.style | raw }}
    {% endif %}
    }
</style>

<div id="{{ objet.id }}" data-objet="{{ objet.object }}"
    {% if objet.form is not empty %} data-form="{{ objet.form }}" {% endif %}
    {% if objClass is not empty %} class="{{ objClass }}" {% endif %}
    {% if objet.event is not empty %}
        {% for evt, callback in objet.event %}
            data-{{ evt }} = "{{ callback }}"
        {% endfor %}
    {% endif %}
>
    {%  if objet.label is not empty or objet.icon is not empty %}
        <label for="{{ objet.id }}_{{ objet.type }}"
        {% if labelClass is not empty %} class="{{ labelClass }}" {% endif %}
        >
            {% if objet.icon is defined %}
                <i class="{{ objet.icon }}"></i>
            {% endif %}
            {{ objet.label }}
        </label>
    {% endif %}
    <input id="{{ objet.id }}_{{ objet.type }}" name="{{ objet.name }}" type="{{ objet.type }}" value="{{ objet.value }}"
        {% if objet.size is not empty %} size="{{ objet.size }}" {% endif %}
        {% if objet.maxlength is not empty %} maxlength="{{ objet.maxlength }}" {% endif %}
        {% if objet.state == false %} disabled {% endif %}
        {% if inputClass is not empty %} class="{{ inputClass }}" {% endif %}
        {% if objet.placeholder is not empty %} placeholder="{{ objet.placeholder }}" {% endif %}
        {% if objet.infoBulle is not empty or (objet.errMessage is not defined or objet.errMessage is empty) %}
            {%  set infoBulle = objet.infoBulle %}
            {% include 'graphic-object-templating/oobject/infoBulle.twig'  with infoBulle %}
        {% endif %}
        {% if objet.type != "hidden" and objet.errMessage is defined and objet.errMessage is not empty %}
            {%  set infoBulle = objet.errMessage %}
            {% include 'graphic-object-templating/oobject/infoBulle.twig'  with infoBulle %}
        {% endif %}
    />
    {% if objet.type != "hidden" %}
    <div class="control-group error">{{ objet.errMessage }}</div>
    {% endif %}
</div>

{% if objet.type != "hidden" %}
    {% if objet.event is defined and objet.event is not empty %}
        <script id="{{ objet.id }}Script">
            $('document').ready(
                {% if objet.event is not empty %}
                    {% for evt, callback in objet.event %}
                        $('#{{ objet.id }}_{{ objet.type }}').on('{{ evt }}', function() {
                            invokeAjax(ocbutton_getData($('#{{ objet.id }}_{{ objet.type }}'),'{{ evt }}'));
                        })
                    {% endfor %}
                {% endif %}
            );
        </script>
    {% endif %}
{% endif %}

{% if objet.infoBulle is not empty %}
    {%  set type = objet.infoBulle.type %}
    {%  set id = objet.id ~ "_" ~ objet.type %}
    {% include 'graphic-object-templating/oobject/infoBulle.js.twig'  with {'id':id, 'type':type} %}
{% endif %}
